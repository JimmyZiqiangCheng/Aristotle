<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"restful-api.js.html":{"id":"restful-api.js.html","title":"Source: restful-api.js","body":" DocStrap Modules repositories/restful-api Source: restful-api.js /** * @module repositories/restful-api * */ const Restful = require('./request-methods'); const bcrypt = require('bcrypt'); var BACKEND_API_ENDPOINT = process.env.BACKEND_API_ENDPOINT || \"http://localhost:8000\"; console.log(BACKEND_API_ENDPOINT); const API_ROUTES = { Course: \"/api/courses\", User: \"/api/users\", Department: \"/api/departments\", Type: \"/api/types\", Role: \"/api/roles\" }; const PASS_SALT_ROUNDS = 5; const userRoute = `${BACKEND_API_ENDPOINT}${API_ROUTES.User}`; const courseRoute = `${BACKEND_API_ENDPOINT}${API_ROUTES.Course}`; const typeRoute = `${BACKEND_API_ENDPOINT}${API_ROUTES.Type}`; const depratmentRoute = `${BACKEND_API_ENDPOINT}${API_ROUTES.Department}`; const roleRoute = `${BACKEND_API_ENDPOINT}${API_ROUTES.Role}`; // // ────────────────────────────────────────────────────────────────────────── I ────────── // :::::: A L L A B O U T C O U R S E S : : : : : : : : // ──────────────────────────────────────────────────────────────────────────────────── // module.exports.getAllCourses = () =&gt; { const uri = courseRoute; return Restful.get(uri); }; module.exports.getCourse = (courseId) =&gt; { const uri = `${courseRoute}/${courseId}`; return Restful.get(uri); } module.exports.createNewCourse = (courseContent) =&gt; { const uri = courseRoute; return Restful.post(uri, courseContent); }; module.exports.updateCourse = (courseId, updatingContent) =&gt; { const uri = `${courseRoute}/${courseId}`; return Restful.put(uri, updatingContent); }; // // ────────────────────────────────────────────────────────────────────── II ────────── // :::::: A L L A B O U T U S E R S : : : : : : : : // ──────────────────────────────────────────────────────────────────────────────── // module.exports.authenticateUser = (username) =&gt; { const uri = `${userRoute}/authenticate`; let payload = { id: username }; return Restful.post(uri, payload); } /** * Authenticate the user account with username and password * This function will request password from backend and compare it with * the inputted username and password * * @param {string} username user's username * @param {string} password user's password * @returns {Promise} A Promsie * @example * authenticate(user001, password001).then().catch() * [then() is successed, catch() otherwise] * if authenticated: * return: { * username: user001, * type: Employee * } * * if not authenticated: * return: { * message: 'Incorrect Username or Password' * } * or an error */ module.exports.authenticate = async (username, password) =&gt; { const uri = `${userRoute}/authenticate`; let payload = { id: username }; return new Promise((resolve, reject) =&gt; { Restful.post(uri, payload).then((data) =&gt; { if (data['user']) { const user = data['user']; const passFromApi = user['password']; const type = user['type']; // compare password bcrypt.compare(password, passFromApi, (err, isValid) =&gt; { if (err) { reject(err); } if (isValid === true) { resolve({ username: username, type: type['title'] }); } else { reject({ message: 'Incorrect Username or Password' }); } }); } else { reject({ message: 'Incorrect Username or Password' }); } }).catch((err) =&gt; { reject(err); }); }); } /** * To register a new user. * @param {string} dptId Department's Id (MongoDB ObjectId) * @param {string} rId Role's Id (MongoDB ObjectId) * @param {string} tId Type's Id (Mongo * @param {string} username Login's username * @param {string} password Login's password * @param {string} firstname User's firstname * @param {string} lastname User's lastname * @param {string} email User's email * @param {string} phone User's phone * @return {Object} A Promise * @example * Succeeded: * { * message: \"OK\" * } * //Failed: * { * message: \"NO\" * } * Error: */ module.exports.register = async (dptId, rId, tId, username, password, firstname, lastname, email, phone) =&gt; { const uri = userRoute; return new Promise(async (resolve, reject) =&gt;{ await bcrypt.hash(password, PASS_SALT_ROUNDS, function (err, hashPass) { if(err){ reject(err); } console.log(hashPass); let payload = { id: username, password: hashPass, firstname: firstname, lastname: lastname, email: email, phone: phone, department: dptId, type: tId, role: rId }; Restful.post(uri, payload).then(data =&gt; resolve(data)).catch(err =&gt; reject(err)); }); }); } // // ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── III ────────── // :::::: A L L A B O U T R O L E S - D E P A R T M E N T S - U S E R T Y P E S : : : : : : : : // ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────── // /** * Get all Roles * * @param {string} type the type of the user (Optional) * @returns {Promise} A Promise Object * @example * getAllRoles(\"Employee\").then().catch() * * // output: * { * message: \"OK\", * roles: [ * { * _id: \"5d8d9fe65e14d62f70640rwe\", * title: \"Designer\" * }, * { * _id: \"5d8d9fd45e14d62f70640eeb\", * title: \"Developer\", * } * ] * } */ module.exports.getAllRoles = (type) =&gt; { const uri = roleRoute; if(type) { return Restful.get(uri, { type: type }); } else { return Restful.get(uri); } } /** * Get all User Types * * @param {string} type the type of the user (Optional) * @returns {Promise} A Promise Object * @example * getAllTypes(\"Employee\").then().catch() * * //output: * { * message: \"OK\", * roles: [ * { * _id: \"5d8d9fe65124d62f70640rwe\", * title: \"Employee\" * }, * { * _id: \"5d8d9fd4109d4d62f70640eeb\", * title: \"Administrator\", * } * ] * } */ module.exports.getAllTypes = (type) =&gt; { const uri = typeRoute; if(type) { return Restful.get(uri, { type: type }); } else { return Restful.get(uri); } } /** * Get all deparments * * @param {string} type the type of the user (Optional) * @returns {Promise} A Promise Object * @example * getAllDepartments(\"Employee\").then().catch() * * //output: * { * message: \"OK\", * roles: [ * { * _id: \"148d9fe6510292f70640rwe\", * title: \"Human Resources\" * }, * { * _id: \"910f9fd45e14d62f70640eeb\", * title: \"IT\", * } * ] * } */ module.exports.getAllDepartments = (type) =&gt; { const uri = depratmentRoute; if(type) { return Restful.get(uri, { type: type }); } else { return Restful.get(uri); } } /** * Create a new department * * @param {string} title department's name/title * @returns A Promise * @example //output * { * message: 'Added', * createDpt: { * _id: '5d9468bc6c5b9b5af915f3c4', * title: 'Community', * createdAt: '2019-10-02T09:07:08.525Z', * updatedAt: '2019-10-02T09:07:08.525Z', * __v: 0 * } * } */ module.exports.createDepartment = (title) =&gt; { const uri = `${BACKEND_API_ENDPOINT}/api/department`; return Restful.post(uri, { title: title }); } /** * Create a new role * * @param {string} title role's name/title * @returns A Promise */ module.exports.createRole = (title) =&gt; { const uri = `${BACKEND_API_ENDPOINT}/api/role`; return Restful.post(uri, { title: title }); } /** * Create a new type * * @param {string} title type's name/title * @returns A Promise */ module.exports.createType = (title) =&gt; { const uri = `${BACKEND_API_ENDPOINT}/api/type`; return Restful.post(uri, { title: title }); } × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" DocStrap Modules repositories/restful-api Modules × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" DocStrap Modules repositories/restful-api × Search results Close "},"module-repositories_restful-api.html":{"id":"module-repositories_restful-api.html","title":"Module: repositories/restful-api","body":" DocStrap Modules repositories/restful-api Module: repositories/restful-api Source: restful-api.js, line 1 Methods &lt;static&gt; authenticate(username, password) Authenticate the user account with username and password This function will request password from backend and compare it with the inputted username and password Parameters: Name Type Description username string user's username password string user's password Source: restful-api.js, line 92 Returns: A Promsie Type Promise Example authenticate(user001, password001).then().catch() [then() is successed, catch() otherwise] if authenticated: return: { username: user001, type: Employee } if not authenticated: return: { message: 'Incorrect Username or Password' } or an error &lt;static&gt; createDepartment(title) Create a new department Parameters: Name Type Description title string department's name/title Source: restful-api.js, line 307 Returns: A Promise Example //output { message: 'Added', createDpt: { _id: '5d9468bc6c5b9b5af915f3c4', title: 'Community', createdAt: '2019-10-02T09:07:08.525Z', updatedAt: '2019-10-02T09:07:08.525Z', __v: 0 } } &lt;static&gt; createRole(title) Create a new role Parameters: Name Type Description title string role's name/title Source: restful-api.js, line 320 Returns: A Promise &lt;static&gt; createType(title) Create a new type Parameters: Name Type Description title string type's name/title Source: restful-api.js, line 333 Returns: A Promise &lt;static&gt; getAllDepartments(type) Get all deparments Parameters: Name Type Description type string the type of the user (Optional) Source: restful-api.js, line 278 Returns: A Promise Object Type Promise Example getAllDepartments(\"Employee\").then().catch() //output: { message: \"OK\", roles: [ { _id: \"148d9fe6510292f70640rwe\", title: \"Human Resources\" }, { _id: \"910f9fd45e14d62f70640eeb\", title: \"IT\", } ] } &lt;static&gt; getAllRoles(type) Get all Roles Parameters: Name Type Description type string the type of the user (Optional) Source: restful-api.js, line 208 Returns: A Promise Object Type Promise Example getAllRoles(\"Employee\").then().catch() // output: { message: \"OK\", roles: [ { _id: \"5d8d9fe65e14d62f70640rwe\", title: \"Designer\" }, { _id: \"5d8d9fd45e14d62f70640eeb\", title: \"Developer\", } ] } &lt;static&gt; getAllTypes(type) Get all User Types Parameters: Name Type Description type string the type of the user (Optional) Source: restful-api.js, line 243 Returns: A Promise Object Type Promise Example getAllTypes(\"Employee\").then().catch() //output: { message: \"OK\", roles: [ { _id: \"5d8d9fe65124d62f70640rwe\", title: \"Employee\" }, { _id: \"5d8d9fd4109d4d62f70640eeb\", title: \"Administrator\", } ] } &lt;static&gt; register(dptId, rId, tId, username, password, firstname, lastname, email, phone) To register a new user. Parameters: Name Type Description dptId string Department's Id (MongoDB ObjectId) rId string Role's Id (MongoDB ObjectId) tId string Type's Id (Mongo username string Login's username password string Login's password firstname string User's firstname lastname string User's lastname email string User's email phone string User's phone Source: restful-api.js, line 154 Returns: A Promise Type Object Example Succeeded: { message: \"OK\" } //Failed: { message: \"NO\" } Error: × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
